### CalcFormatter.py

1. **功能**：
   - 提供格式化数学表达式的功能。
   - 通过多种格式化器来处理并优化表达式。

2. **设计需求**：
   - 为计算器应用提供一个清晰、优化的数学表达式。
   - 使用不同的格式化器来处理不同的情况和规则。

3. **输入/输出分析**：
   - **输入**：原始的数学表达式（字符串格式）。
   - **输出**：格式化后的数学表达式。

4. **实现方法**：
   - 定义了`CalculateFormatter`类，其中包含主要的格式化函数。
   - 使用了多个格式化器，按照优先级进行排序和应用。

5. **依赖关系**：
   - 该模块依赖于其他模块，如`LoopFlags`和`Utils`。

6. **设计优点**：
   - 模块化设计：代码组织清晰，各格式化器分离。
   - 使用了优先级列表，确保格式化器按正确的顺序应用。

7. **测试与验证**：
   - 从当前的代码中，没有直接的测试和验证部分。可能在其他模块或文件中有相关测试。

8. **未来的改进方向**：
   - 可考虑增加更多的格式化器来处理更复杂的数学表达式。
   - 可以进一步优化代码性能。